# FabSC
This plugin runs the samples from an EasyVVUQ campaign using FabSim3 via the *campaign2emsemble* subroutine.

## Installation
Simply type `fab localhost install_plugin:FabSC` anywhere inside your FabSim3 install directory.

## Explanation of files
+ FabSC/FabSC.py: contains the *sc* subroutine in which the job properties are specified, e.g. number of cores, memory, wall-time limit etc
+ FabSC/templates/sc: contains the command-line execution command for a single EasyVVUQ SC sample.

## Detailed Examples

### Executing a single job on localhost
In the examples folder there is a script which runs an EasyVVUQ SC campaign using FabSim3 for a simple advection-diffusion equation (ade) on the localhost. The governing equations are:

![equation](https://latex.codecogs.com/gif.latex?%5Cfrac%7Bdu%7D%7Bdx%7D%20&plus;%20%5Cfrac%7B1%7D%7BPe%7D%5Cfrac%7Bd%5E2u%7D%7Bdx%7D%20%3D%20f),

where the Peclet Numer (Pe) and forcing term (f) are the uncertain SC parameters.

The file *run_SC_Fab_campaign.py* contains the main script. The first 4 steps are the same as for an EasyVVUQ campaign that does not use FabSim to execute the runs:
 1. Create an EasyVVUQ campaign object, with *ade_input.json* as argument, which defines the UQ campaign.
 2. Per uncertain parameter, select the input distribution and polynomial order.
 3. Select the SC_Sampler and create a tensor grid from the 1D rules selected in step 2.
 4. Create the ensemble run directories which will be used in Fabsim's *campaign2ensemble* subroutine.
 
The fifth step is specific to FabSim. For now, several variables need to be hardcoded, i.e.: 
 + A simulation identifier (*ade_example1*)
 + Your FabSim home directory
 + The *FabSC/template/sc* file contains the command line instruction to run a single sample, in this case: *python3 $ade_exec ade_in.json*. Here, *ade_in.json* is just the input file with the parameter values generated by EasyVVUQ. Furthermore, *$ade_exec* is the full path to the Python script which runs the advection diffusion equation at the parameters of *ade_in.json*. It is defined in *deploy/machines_user.yml*, which in my case looks like
 
*localhost:*

 &nbsp;&nbsp;&nbsp;&nbsp;*ade_exec: "/home/wouter/CWI/VECMA/FabSim3/plugins/FabSC/examples/advection_diffusion/run_ADE.py"*


